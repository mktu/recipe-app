# Scripts

é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆé›†

## ãƒ¬ã‚·ãƒ”ç™»éŒ²ãƒ†ã‚¹ãƒˆ

### URLåé›†

```bash
npm run collect:urls
```

ã‚µã‚¤ãƒˆãƒãƒƒãƒ—ã‹ã‚‰è‡ªå‹•ã§ãƒ¬ã‚·ãƒ”URLã‚’åé›†ã—ã€`seed/test-recipe-urls.txt` ã«ä¿å­˜ã™ã‚‹ã€‚

**åé›†å¯¾è±¡ã‚µã‚¤ãƒˆ:**
- Delish Kitchen (50ä»¶)
- ã‚¯ãƒ©ã‚·ãƒ« (50ä»¶)
- ã¿ã‚“ãªã®ãã‚‡ã†ã®æ–™ç† (15ä»¶)
- å‘³ã®ç´ ãƒ‘ãƒ¼ã‚¯ (13ä»¶)
- ç™½ã”ã¯ã‚“.com (10ä»¶)

### ãƒ¬ã‚·ãƒ”ç™»éŒ²ãƒ†ã‚¹ãƒˆ

```bash
# å…¨ä»¶å®Ÿè¡Œ
npm run test:recipe

# ä»¶æ•°åˆ¶é™
npm run test:recipe --limit=10

# ãƒ‘ãƒ¼ã‚¹ã®ã¿ï¼ˆç™»éŒ²ã—ãªã„ï¼‰
npm run test:recipe --dry-run

# å˜ç™ºå®Ÿè¡Œ
npm run test:recipe https://example.com/recipe/123

# ãƒªã‚¯ã‚¨ã‚¹ãƒˆé–“éš”ã‚’èª¿æ•´ï¼ˆãƒŸãƒªç§’ï¼‰
npm run test:recipe --delay=2000
```

**å‰ææ¡ä»¶:**
- é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ (`npm run dev`)
- ãƒ­ãƒ¼ã‚«ãƒ« Supabase ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ (`supabase start`)

**å‡ºåŠ›ä¾‹:**
```
ğŸ§ª ãƒ¬ã‚·ãƒ”ç™»éŒ²ä¸€æ‹¬ãƒ†ã‚¹ãƒˆ
========================
ã‚µãƒ¼ãƒãƒ¼: http://localhost:3000
ãƒ¦ãƒ¼ã‚¶ãƒ¼: dev-user-001
å¯¾è±¡ä»¶æ•°: 10ä»¶

[1/10] https://delishkitchen.tv/recipes/xxx
   ãƒ‘ãƒ¼ã‚¹ä¸­...
   ã‚¿ã‚¤ãƒˆãƒ«: ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ã‚·ãƒ”
   é£Ÿææ•°: 5ä»¶
   ç™»éŒ²ä¸­...
   âœ… ç™»éŒ²å®Œäº† (ID: xxx)

========================================
ğŸ“Š å®Ÿè¡Œçµæœãƒ¬ãƒãƒ¼ãƒˆ
========================================
âœ… æˆåŠŸ: 8ä»¶
â­ï¸  ã‚¹ã‚­ãƒƒãƒ—ï¼ˆç™»éŒ²æ¸ˆã¿ï¼‰: 2ä»¶
âŒ å¤±æ•—: 0ä»¶
åˆè¨ˆ: 10ä»¶
```

## LINE Botãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

```bash
# é£Ÿææ¤œç´¢ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
npm run test:bot "é£Ÿæ"

# é€šå¸¸æ¤œç´¢
npm run test:bot "é¶è‚‰ ç‰ã­ã"

# ãƒ˜ãƒ«ãƒ—
npm run test:bot "ä½¿ã„æ–¹"
```

LINE Botã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ç¢ºèªã§ãã‚‹ã€‚ngrokä¸è¦ã€‚

**å‰ææ¡ä»¶:**
- ãƒ­ãƒ¼ã‚«ãƒ« Supabase ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ (`supabase start`)

**å‡ºåŠ›ä¾‹:**
```
ğŸ§ª LINE Bot Response Test
========================================
ğŸ“¤ Input: "é£Ÿæ"
ğŸ‘¤ User: dev-user-001

ğŸ”€ Route: Ingredient Search Prompt

ğŸ“¥ Response:
   type: text
   text: ğŸ” é£Ÿæã§æ¤œç´¢
         ...

   quickReply:
     - [é¶è‚‰] â†’ "é¶è‚‰"
     - [è±šè‚‰] â†’ "è±šè‚‰"
     ...
```

## é£Ÿæãƒãƒƒãƒãƒ³ã‚°è§£æ

```bash
./scripts/check-ingredient-match-rate.sh
```

DBã«ç™»éŒ²ã•ã‚ŒãŸãƒ¬ã‚·ãƒ”ã®é£Ÿæãƒãƒƒãƒãƒ³ã‚°ç‡ã¨æœªãƒãƒƒãƒé£ŸæTOP20ã‚’è¡¨ç¤ºã™ã‚‹ã€‚
