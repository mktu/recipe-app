# 探す体験の改善（LINE チャット内クイックリプライ）

## ステータス
📋 未着手

## 背景・課題

現在リッチメニューの「探す」から食材検索のみができる。
レシピが増えると探し方も多様になるため（お気に入り、よく作る、フリーワードなど）、複数の探し方を統一した入り口から提供したい。

## 方針

**LINE チャット内で完結させる。LIFF は開かない。**

「探す」タップで Quick Reply でカテゴリを選ばせる。リッチメニューの変更は不要。

```
リッチメニュー「探す」タップ（テキスト送信）
    ↓
Bot が Quick Reply でカテゴリを提示
[⭐ お気に入り] [🔁 よく作る] [📦 材料少なめ] [⏱ 時短]
    ↓
カテゴリ選択 → 対応する結果を Flex Message で返す
```

食材名・レシピ名はそのままテキスト入力でも検索できます（既存の検索フローに流す）。

### なぜ LIFF ではなく Quick Reply か

- LIFF を開く手間がそもそも不要（LINE チャット内で完結）
- Quick Reply はキーボード上に表示されるため親指で即タップできる
- 選択後に消えるため画面がスッキリする
- 既存のボット基盤（webhook）をそのまま活用できる

## 実装（webhook 側）

「探す」キーワードを検知 → Quick Reply で4カテゴリを提示:

```
[⭐ お気に入り] [🔁 よく作る] [📦 材料少なめ] [⏱ 時短]
```

- ⭐ お気に入り → お気に入りレシピを Flex Message カルーセルで返す
- 🔁 よく作る → `cook_count` 上位レシピを Flex Message カルーセルで返す
- 📦 材料少なめ → `ingredient_count` が少ないレシピを返す（要DB対応）
- ⏱ 時短 → `cooking_time_minutes` が短いレシピを返す（要DB対応）

食材名やレシピ名をそのまま入力した場合は既存の `handleSearch` に流す。

## 関連エピック

- [お気に入り](./favorites.md) - ⭐ お気に入り選択肢の実装
- [よく作る（調理回数カウント）](./cook-count.md) - 🔁 よく作る選択肢の実装
- [調理時間データ取得](./cooking-time.md) - ⏱ 時短選択肢の実装
